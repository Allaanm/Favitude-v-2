{% extends 'Favitude/base.html' %}
{% load static %}

{% block title %}Sign Up - Favitude{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/signup.css' %}">
{% endblock %}

{% block content %}
<div class="signup-page-wrapper">
    <div class="content">
        <div class="signup_options">
            <h5>Sign up with</h5>
            <div class="signup_icons">
                <img src="{% static 'images/images-signup/Facebook.png' %}" alt="Facebook">
                <img src="{% static 'images/images-signup/Google.png' %}" alt="Google">
                <img src="{% static 'images/images-signup/Microsoft.png' %}" alt="Microsoft">
            </div>
        </div>

        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div>{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}

        <form action="{% url 'Hill:signup_page'%}" method="POST" class="signup_form" onsubmit="return check()"
            novalidate>
            {% csrf_token %}

            <div>
                <label for="fname">Full Name</label>
                <input class="fields" type="text" name="username" placeholder="" id="fname"
                    pattern="^[a-zA-Z\s]+" onkeyup="manageBtn()">
                <div id="errname" class="emsg"></div>
            </div>

            <div>
                <label for="femail">Email</label>
                <input class="fields" type="email" name="email" id="femail" placeholder=""
                    onkeyup="manageBtn()">
                <div id="erremail" class="emsg"></div>
            </div>

            <div>
                <label for="pass">Password</label>
                <input class="fields" type="password" name="password" id="pass" placeholder="Min. 8 characters" required
                    minlength="8" onkeyup="manageBtn()">
                <div id="errpass" class="emsg"></div>
            </div>

            <div class="checkbox-rect2">
                <input type="checkbox" id="checkbox-rect2" name="check">
                <label for="checkbox-rect2">Remember me</label>
            </div>

            <button type="submit" class="submit" id="btnSubmit" disabled>Submit</button>
        </form>

        <p class="undertext">Have an account? <a href="{% url 'Hill:login_page' %}" class="login">Log in</a></p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    const fname = document.getElementById("fname");
    const femail = document.getElementById("femail");
    const pass = document.getElementById("pass");
    const btnSubmit = document.getElementById("btnSubmit");
    const errName = document.getElementById("errname");
    const errEmail = document.getElementById("erremail");
    const errPass = document.getElementById("errpass");

    function check() {
        let valid = true;

        // Name validation
        if (!fname.checkValidity()) {
            valid = false;
            fname.classList.add("err");
            errName.innerText = "Please use only letters";
        } else {
            fname.classList.remove("err");
            errName.innerText = "";
        }

        // Email validation
        if (!femail.checkValidity()) {
            valid = false;
            femail.classList.add("err");
            errEmail.innerText = "Please use a valid email address";
        } else {
            femail.classList.remove("err");
            errEmail.innerText = "";
        }

        // Password validation
        if (!pass.checkValidity()) {
            valid = false;
            pass.classList.add("err");
            errPass.innerText = "Password must be at least 8 characters";
        } else {
            pass.classList.remove("err");
            errPass.innerText = "";
        }

        return valid;
    }

    function manageBtn() {
        if (fname.value.trim() !== '' && femail.value.trim() !== '' && pass.value.trim() !== '') {
            btnSubmit.disabled = false;
        } else {
            btnSubmit.disabled = true;
        }
    }
</script>
{% endblock %}